{% extends 'accounts/base.html' %}

{% block title %}Painel - {{ block.super }}{% endblock %}

{% block content %}
<h2>Seu Painel</h2>

{% if user.profile.tipo_usuario == 'instrutor' %}
    <h3>Seus Cursos</h3>
    {% if cursos %}
        <div class="curso-list">
            {% for curso in cursos %}
            <div class="curso-item">
                <h4>{{ curso.titulo }}</h4>
                <p>{{ curso.descricao|truncatewords:30 }}</p>
                <p><small>Criado em: {{ curso.data_criacao|date:"d/m/Y" }}</small></p>
                <a href="#" class="btn">Gerenciar Curso</a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Você ainda não criou nenhum curso.</p>
    {% endif %}
    
    <div class="actions">
        <a href="#" class="btn">Criar Novo Curso</a>
    </div>

{% else %}
    <h3>Seus Cursos Inscritos</h3>
    {% if inscricoes %}
        <div class="curso-list">
            {% for inscricao in inscricoes %}
            <div class="curso-item">
                <h4>{{ inscricao.curso.titulo }}</h4>
                <p>{{ inscricao.curso.descricao|truncatewords:30 }}</p>
                <p><small>Inscrito em: {{ inscricao.data_inscricao|date:"d/m/Y" }}</small></p>
                <a href="#" class="btn">Acessar Curso</a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Você ainda não está inscrito em nenhum curso.</p>
    {% endif %}

    <h3>Cursos Disponíveis</h3>
    {% if cursos_disponiveis %}
        <div class="curso-list">
            {% for curso in cursos_disponiveis %}
            <div class="curso-item">
                <h4>{{ curso.titulo }}</h4>
                <p>{{ curso.descricao|truncatewords:30 }}</p>
                <p><small>Instrutor: {{ curso.instrutor.get_full_name|default:curso.instrutor.username }}</small></p>
                <a href="#" class="btn">Ver Detalhes</a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Não há novos cursos disponíveis no momento.</p>
    {% endif %}
{% endif %}

<style>
    .curso-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    .curso-item {
        border: 1px solid #ddd;
        padding: 15px;
        border-radius: 8px;
        background-color: #fff;
    }
    .curso-item h4 {
        margin: 0 0 10px 0;
        color: #333;
    }
    .curso-item p {
        margin: 5px 0;
        color: #666;
    }
    .curso-item small {
        color: #888;
    }
    .actions {
        margin-top: 20px;
    }
</style>
{% endblock %}